<div align="center">
  <img src="nanobot_logo.png" alt="nanobot" width="500">
  <h1>Nanobot AI - å¤šç§Ÿæˆ·æŠ•èµ„åˆ†æåŠ©æ‰‹å¹³å°</h1>
  <p>
    <img src="https://img.shields.io/badge/python-â‰¥3.11-blue" alt="Python">
    <img src="https://img.shields.io/badge/license-MIT-green" alt="License">
    <img src="https://img.shields.io/badge/æ¶æ„-å¤šç§Ÿæˆ·-orange" alt="Architecture">
    <img src="https://img.shields.io/badge/é¢†åŸŸ-é‡‘èç§‘æŠ€-green" alt="Focus">
  </p>
</div>

æœ¬é¡¹ç›®æ˜¯åŸºäº [Nanobot](https://github.com/HKUDS/nanobot) æ¡†æ¶çš„**äºŒæ¬¡å¼€å‘ç‰ˆæœ¬**ã€‚æˆ‘ä»¬å°†åŸæœ‰çš„è½»é‡çº§ä¸ªäººåŠ©æ‰‹æ‰©å±•ä¸ºä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„**å¤šç§Ÿæˆ· SaaS å¹³å°**ï¼Œä¸“é—¨ç”¨äºè‡ªåŠ¨åŒ–æŠ•èµ„åˆ†æå’Œä¸ªæ€§åŒ–æŠ¥å‘Šç”Ÿæˆã€‚

æœ¬é¡¹ç›®å°† CLI å·¥å…·è½¬åŒ–ä¸ºæœåŠ¡åŒ–æ¶æ„ï¼Œèƒ½å¤ŸåŒæ—¶æ”¯æŒå¤šç”¨æˆ·ï¼Œå¹¶æä¾›éš”ç¦»çš„ä¸Šä¸‹æ–‡ã€å®šæ—¶ä»»åŠ¡è°ƒåº¦ä»¥åŠåŸºäºå¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„ä¸“ä¸šé‡‘èæŠ¥å‘Šç”Ÿæˆèƒ½åŠ›ã€‚

## ğŸš€ äºŒæ¬¡å¼€å‘æ ¸å¿ƒç‰¹æ€§

### 1. å¤šç§Ÿæˆ·æ¶æ„ (Multi-Tenant)
- **éš”ç¦»çš„å·¥ä½œç©ºé—´**ï¼šæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ç‹¬ç«‹çš„ç›®å½• (`~/.nanobot/workspaces/user_{id}`)ï¼Œå­˜å‚¨å„è‡ªçš„é…ç½®ã€è®°å¿†å’Œç”Ÿæˆçš„æŠ¥å‘Šã€‚
- **ä¸Šä¸‹æ–‡åŠ¨æ€åˆ‡æ¢**ï¼š`MultiTenantAgentLoop` ç¡®ä¿å·¥å…·æ‰§è¡Œå’Œè®°å¿†æ£€ç´¢ä¸¥æ ¼é™åˆ¶åœ¨å½“å‰æ´»è·ƒç”¨æˆ·çš„ç¯å¢ƒå†…ï¼Œé˜²æ­¢æ•°æ®è¶Šæƒã€‚
- **å¹¶å‘ä»»åŠ¡å¤„ç†**ï¼šæ”¯æŒå¤šç”¨æˆ·åŒæ—¶åœ¨çº¿ï¼Œå¹¶èƒ½å¤Ÿå¹¶è¡Œå¤„ç†å„è‡ªçš„åˆ†æè¯·æ±‚ã€‚

### 2. è‡ªåŠ¨åŒ–æŠ•èµ„æŠ¥å‘Šç”Ÿæˆ
- **å¤šç»´åº¦æŠ¥å‘Š**ï¼šæ”¯æŒç”ŸæˆæŠ•èµ„æ—¥æŠ¥ (Daily)ã€å‘¨æŠ¥ (Weekly) ä»¥åŠå®æ—¶å¼‚åŠ¨æé†’ (Real-time)ã€‚
- **åŠ¨æ€ Prompt å¼•æ“**ï¼šé€šè¿‡æ¨¡æ¿ç³»ç»Ÿ (`nanobot/services/prompt_templates.py`) è‡ªåŠ¨æ³¨å…¥ç”¨æˆ·å…³æ³¨åˆ—è¡¨ (Watchlist)ã€é£é™©åå¥½ã€æŠ•èµ„é£æ ¼ç­‰ä¸ªæ€§åŒ–æ•°æ®ã€‚
- **å‰æ²¿æ¨¡å‹é›†æˆ**ï¼šé›†æˆ Gemini 2.0 Flash (é€šè¿‡ `LiteLLMProvider`)ï¼Œæä¾›é«˜è´¨é‡ã€ç»“æ„åŒ–çš„é‡‘èåˆ†æå†…å®¹ã€‚

### 3. RESTful API æœåŠ¡
- **FastAPI åç«¯**ï¼šä½¿ç”¨ FastAPI æ›¿ä»£äº†åŸæœ¬çš„å‘½ä»¤è¡Œäº¤äº’ï¼Œæä¾›æ ‡å‡†åŒ–çš„ Web æœåŠ¡æ¥å£ (`nanobot/api/main.py`)ã€‚
- **ä¸»è¦æ¥å£**ï¼š
  - `POST /users`: åˆ›å»ºæ–°ç§Ÿæˆ·ï¼Œåˆå§‹åŒ–å…¶æŠ•èµ„ç”»åƒå’Œå…³æ³¨åˆ—è¡¨ã€‚
  - `POST /reports`: ç«‹å³è§¦å‘ç‰¹å®šç±»å‹çš„æŠ¥å‘Šç”Ÿæˆã€‚
  - `PUT /users/{id}/watchlist`: åŠ¨æ€æ›´æ–°ç”¨æˆ·çš„æŠ•èµ„å…³æ³¨æ ‡çš„ã€‚
- **å¼‚æ­¥å¤„ç†**ï¼šæŠ¥å‘Šç”Ÿæˆç­‰è€—æ—¶ä»»åŠ¡é€šè¿‡ Background Tasks å¼‚æ­¥å¤„ç†ï¼Œç¡®ä¿æ¥å£å“åº”æ€§èƒ½ã€‚

### 4. è°ƒåº¦æœåŠ¡ (Scheduler)
- **ç²¾å‡†å®šæ—¶è°ƒåº¦**ï¼šå†…ç½® `ReportScheduler` (åŸºäº APScheduler)ï¼Œå¯ç®¡ç†æ•°åƒåç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡ã€‚
- **ç”¨æˆ·è‡ªå®šä¹‰æ—¶åŒº**ï¼šæ ¹æ®ç”¨æˆ·è®¾ç½®çš„æ—¶é—´ç‚¹ï¼ˆå¦‚â€œæ¯æ—¥ä¸Šåˆ 9:00â€ï¼‰å‡†æ—¶è§¦å‘åˆ†æé€»è¾‘ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œç¡®ä¿äº†é«˜æ‰©å±•æ€§å’Œå®‰å…¨æ€§ï¼š

```mermaid
graph TD
    Client[å®¢æˆ·ç«¯ / å‰ç«¯] -->|REST API| API[FastAPI ç½‘å…³]
    API -->|ç®¡ç†| WM[å·¥ä½œç©ºé—´ç®¡ç†å™¨]
    API -->|è°ƒåº¦| Sched[æŠ¥å‘Šè°ƒåº¦å™¨]
    
    Sched -->|è§¦å‘| Gen[æŠ¥å‘Šç”Ÿæˆå™¨]
    Gen -->|ç»„è£…ä¸Šä¸‹æ–‡| MTLoop[å¤šç§Ÿæˆ· Agent Loop]
    
    MTLoop -->|è°ƒç”¨| LLM[Gemini / LiteLLM]
    MTLoop -->|è¯»å†™éš”ç¦»æ•°æ®| WS[ç”¨æˆ·å·¥ä½œç©ºé—´ (æ–‡ä»¶ç³»ç»Ÿ)]
    
    subgraph "ç”¨æˆ·å·¥ä½œç©ºé—´ (User Workspace)"
        Config[config.json - é…ç½®]
        Memory[MEMORY.md - é•¿æœŸè®°å¿†]
        Reports[reports/*.md - å†å²æŠ¥å‘Š]
    end
```

æ›´å¤šæ¶æ„ç»†èŠ‚è¯·å‚é˜…ï¼š[å¤šç§Ÿæˆ·æ¶æ„è®¾è®¡æ–‡æ¡£](docs/architecture/multi-tenant.md)

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
nanobot/
â”œâ”€â”€ api/            # ğŸŒ API æœåŠ¡å±‚ (æ–°å¢)
â”‚   â””â”€â”€ main.py     #    æœåŠ¡å…¥å£ä¸æ¥å£å®šä¹‰
â”œâ”€â”€ services/       # ğŸ’¼ ä¸šåŠ¡é€»è¾‘å±‚ (æ–°å¢)
â”‚   â”œâ”€â”€ report_generator.py # æŠ¥å‘Šç”Ÿæˆè°ƒåº¦ä¸ Prompt ç»„è£…
â”‚   â”œâ”€â”€ scheduler.py        # åŸºäº APScheduler çš„ä»»åŠ¡è°ƒåº¦
â”‚   â””â”€â”€ user_config.py      # ç”¨æˆ·ç”»åƒä¸åå¥½ç®¡ç†
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ multi_tenant_loop.py # ğŸ”„ æ”¯æŒä¸Šä¸‹æ–‡åˆ‡æ¢çš„ Agent æ ¸å¿ƒ (ä¿®æ”¹)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ workspace/      # ğŸ“‚ å­˜å‚¨ç®¡ç†
â”‚   â””â”€â”€ manager.py  #    å·¥ä½œç©ºé—´åˆ›å»ºä¸æ¨¡æ¿åŒ–ç®¡ç†
â”œâ”€â”€ channels/       # ğŸ“± æ¨é€é€šé“ (Telegram, é£ä¹¦, WhatsApp ç­‰)
â””â”€â”€ ...
```

## ğŸ“– ç›¸å…³æ–‡æ¡£

æˆ‘ä»¬é‡æ–°æ•´ç†äº†æ–‡æ¡£ç»“æ„ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ï¼š

- **å…¥é—¨æŒ‡å—**:
  - [å¿«é€Ÿå¼€å§‹](docs/getting-started/quickstart.md) - ç¯å¢ƒå®‰è£…ä¸åŸºç¡€ä½¿ç”¨ã€‚
  - **API å‚è€ƒ**: ç›´æ¥å‚è€ƒ `nanobot/api/main.py` ä¸­çš„ FastAPI å®šä¹‰ã€‚

- **æ¶æ„ä¸è®¾è®¡**:
  - [å¤šç§Ÿæˆ·æ¶æ„è¯´æ˜](docs/architecture/multi-tenant.md) - æ ¸å¿ƒéš”ç¦»è®¾è®¡åŸç†ã€‚
  - [å®‰å…¨æœ€ä½³å®è·µ](docs/security/best-practices.md) - ç”¨æˆ·æ•°æ®å®‰å…¨ä¸å·¥å…·æ²™ç®±é™åˆ¶ã€‚

- **é…ç½®è¯´æ˜**:
  - [ç”¨æˆ·ä¸ Agent é…ç½®æ¨¡æ¿](workspace/USER.md) - äº†è§£å·¥ä½œç©ºé—´å†…çš„é…ç½®ç»“æ„ã€‚

## âš¡ å¿«é€Ÿå¼€å§‹ (API æ¨¡å¼)

1.  **å®‰è£…ä¾èµ–**:
    ```bash
    pip install -e .
    pip install fastapi uvicorn apscheduler
    ```

2.  **å¯åŠ¨ API æœåŠ¡å™¨**:
    ```bash
    uvicorn nanobot.api.main:app --host 0.0.0.0 --port 8000
    ```

3.  **åˆ›å»ºæ–°ç”¨æˆ· (ç¤ºä¾‹)**:
    ```bash
    curl -X POST http://localhost:8000/users \
      -H "Content-Type: application/json" \
      -d '{"user_id": "investor_01"}'
    ```

4.  **æ‰‹åŠ¨è§¦å‘æŠ¥å‘Šç”Ÿæˆ**:
    ```bash
    # è¯·ç¡®ä¿å·²åœ¨ç¯å¢ƒå˜é‡æˆ– main.py ä¸­é…ç½®æœ‰æ•ˆçš„ Gemini API Key
    curl -X POST http://localhost:8000/reports \
      -H "Authorization: Bearer investor_01" \
      -H "Content-Type: application/json" \
      -d '{"report_type": "daily"}'
    ```

---
<sub>æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ã€ç ”ç©¶åŠæŠ€æœ¯äº¤æµä½¿ç”¨ã€‚</sub>
